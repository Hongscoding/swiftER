<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Conversation List</title>
</head>
<body>
    <h1>Conversation List</h1>
    <p>logged in as <span sec:authentication="principal.username"></span></p>
    <ul>
        <li th:each="lastMessage : ${lastMessages}">
            <a th:href="@{/conversation/{otherUser}(otherUser=${lastMessage.receiver == currentUser ? lastMessage.sender : lastMessage.receiver})}">
                <span th:text="${lastMessage.sender}"></span>: <span th:text="${lastMessage.message}"></span>
            </a>
        </li>
    </ul>
</body>
</html>